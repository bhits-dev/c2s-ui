<div fxLayout="row" fxLayoutGap="20px">
  <div fxFlex>
    <md-toolbar color="primary" fxLayoutAlign="center">
      <h3> {{ 'PROVIDER.SEARCH.SEARCH_RESULTS.TITLE' | translate }}</h3>
    </md-toolbar>
    <div>
      <pagination-controls
          previousLabel="{{ 'PROVIDER.SEARCH.SEARCH_RESULTS.PAGINATION.PREVIOUS' | translate }}"
          nextLabel="{{ 'PROVIDER.SEARCH.SEARCH_RESULTS.PAGINATION.NEXT' | translate }}"
          (pageChange)="getPage($event)">
      </pagination-controls>
    </div>
    <div fxLayoutAlign="center" *ngIf="loading">
      <md-spinner></md-spinner>
    </div>
    <div *ngIf="providerResult?._embedded['flattenedSmallProviderDtoList'].length===0">
      <md-toolbar fxLayoutAlign="center" color="warn">
        {{ 'PROVIDER.SEARCH.SEARCH_RESULTS.NO_RESULT_MSG' | translate }}
      </md-toolbar>
    </div>
    <div fxLayout="column" fxLayoutAlign="center" [ngStyle]="{'padding-top': '20px'}"
         *ngFor="let provider of asyncProviderResult | async | paginate: {itemsPerPage: itemsPerPage, currentPage: currentPage, totalItems: totalItems}">
      <!--case 1: ready to add-->
      <div [ngStyle]="{'background-color': '#dff0d8', 'border':'1px solid #d5e2d0'}"
           *ngIf="canSelectProvider(provider)">
        <div fxLayout="column" fxFlexOffset="10px">
          <div fxLayout="row" fxLayoutAlign="start">
            <p>{{provider | providerName}}&nbsp;<span>[NPI: {{provider.npi}}]</span></p>
          </div>
          <div>
            <div fxLayout="row" fxLayoutAlign="left" fxLayoutGap="20px">
              <div>
                <button md-icon-button (click)="addProviders(provider)">
                  <md-icon color="primary">add_box</md-icon>
                </button>
                <span>{{ 'PROVIDER.SEARCH.SEARCH_RESULTS.RESULT.SELECT_PROVIDER_LABEL' | translate }}</span>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!--case 2: current provider has already been added in patient's provider list-->
      <div [ngStyle]="{'background-color': '#f5f5f5', 'border':'1px solid #d5e2d0'}"
           *ngIf="isInProviderList(provider)">
        <div fxLayout="column" fxFlexOffset="10px">
          <div fxLayout="row" fxLayoutAlign="start">
            <p>{{provider | providerName}}&nbsp;<span>[NPI: {{provider.npi}}]</span></p>
          </div>
          <div>
            <div fxLayout="row" fxLayoutAlign="left" fxLayoutGap="20px">
              <div>
                <button md-icon-button disabled>
                  <md-icon>check_circle</md-icon>
                </button>
                <span>{{ 'PROVIDER.SEARCH.SEARCH_RESULTS.RESULT.PROVIDER_ALREADY_ADDED_LABEL' | translate }}</span>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!--case 3: current provider has been added in waiting list-->
      <div [ngStyle]="{'background-color': '#f5f5f5', 'border':'1px solid #d5e2d0'}"
           *ngIf="isProviderSelected(provider)">
        <div fxLayout="column" fxFlexOffset="10px">
          <div fxLayout="row" fxLayoutAlign="start">
            <p>{{provider | providerName}}&nbsp;<span>[NPI: {{provider.npi}}]</span></p>
          </div>
          <div>
            <div fxLayout="row" fxLayoutAlign="left" fxLayoutGap="20px">
              <div>
                <button md-icon-button disabled>
                  <md-icon>add_box</md-icon>
                </button>
                <span>{{ 'PROVIDER.SEARCH.SEARCH_RESULTS.RESULT.PROVIDER_CURRENT_ADDED_LABEL' | translate }}</span>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div [ngStyle]="{'border':'1px solid #d5e2d0'}">
        <div fxFlexOffset="20px">
          <p fxLayoutAlign="left">{{provider | providerAddress}}</p>
          <p fxLayoutAlign="left">{{provider.practiceLocationAddressTelephoneNumber | usPhoneNumber}}</p>
        </div>
      </div>
    </div>
    <div>
      <pagination-controls
          previousLabel="{{ 'PROVIDER.SEARCH.SEARCH_RESULTS.PAGINATION.PREVIOUS' | translate }}"
          nextLabel="{{ 'PROVIDER.SEARCH.SEARCH_RESULTS.PAGINATION.NEXT' | translate }}"
          (pageChange)="getPage($event)">
      </pagination-controls>
    </div>
  </div>
  <div fxFlex>
    <md-toolbar color="primary" fxLayoutAlign="center">
      <h3> {{ 'PROVIDER.SEARCH.SEARCH_RESULTS.MULTI_ADD.TITLE' | translate }} </h3>
    </md-toolbar>
    <c2s-provider-multi-add [providers]="selectedProviders"></c2s-provider-multi-add>
  </div>
</div>
